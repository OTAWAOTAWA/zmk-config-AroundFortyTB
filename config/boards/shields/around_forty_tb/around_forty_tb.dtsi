/* config/boards/shields/around_forty_tb/around_forty_tb.dtsi */
#include <dt-bindings/zmk/matrix_transform.h>

 / {
    chosen { zmk,kscan = &kscan0; };

    kscan0: kscan_0 {
        compatible = "zmk,kscan-gpio-matrix";
        label = "KSCAN";
        diode-direction = "col2row";

        /* Columns (出力) : Col0=P1.10, Col1=P1.16, Col2=P0.09, Col3=P0.06, Col4=P0.07
           → 出力なのでプル抵抗は付けない */
        col-gpios =
            <&gpio1 10 GPIO_ACTIVE_HIGH>,
            <&gpio1 16 GPIO_ACTIVE_HIGH>,
            <&gpio0  9 GPIO_ACTIVE_HIGH>,
            <&gpio0  6 GPIO_ACTIVE_HIGH>,
            <&gpio0  7 GPIO_ACTIVE_HIGH>;

        /* Rows (入力) : Row0=P0.03, Row1=P0.28, Row2=P0.29, Row3=P1.11
           → 浮かないよう PULL_DOWN を付ける */
        row-gpios =
            <&gpio0  3 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>,
            <&gpio0 28 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>,
            <&gpio0 29 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>,
            <&gpio1 11 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>;

        /* 任意: チャタ対策（必要時だけON）
         * debounce-press-ms = <5>;
         * debounce-release-ms = <5>;
         */
    };
};
